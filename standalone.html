<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üö® WakeUpProof - La Sveglia che NON Puoi Spegnere!</title>
    
    <!-- PWA Meta Tags -->
    <meta name="description" content="üö® LA SVEGLIA CHE NON PUOI SPEGNERE! Challenge reali, zero scuse, 100% efficacia. Trasforma la tua mattina in una vittoria!">
    <meta name="theme-color" content="#1976d2">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="WakeUpProof">
    
    <!-- Styles -->
    <style>
        :root {
            /* Vibrant, attention-grabbing colors for sleepers */
            --primary-color: #ff4444;
            --primary-dark: #d32f2f;
            --primary-light: #ff6b6b;
            --secondary-color: #ff6b35;
            --accent-color: #ffd93d;
            --success-color: #00d4aa;
            --error-color: #ff1744;
            --warning-color: #ff9800;
            --info-color: #2196f3;
            
            /* High contrast backgrounds */
            --background-color: #0a0a0a;
            --surface-color: #1a1a1a;
            --surface-variant: #2a2a2a;
            --surface-elevated: #3a3a3a;
            
            /* High contrast text */
            --text-primary: #ffffff;
            --text-secondary: #b0b0b0;
            --text-disabled: #666666;
            --text-accent: #ffd93d;
            
            /* Neon borders */
            --border-color: #333333;
            --border-light: #444444;
            --border-neon: #ff4444;
            
            /* Dramatic shadows */
            --shadow: 0 4px 20px rgba(255, 68, 68, 0.3);
            --shadow-hover: 0 8px 30px rgba(255, 68, 68, 0.4);
            --shadow-elevated: 0 12px 40px rgba(255, 68, 68, 0.5);
            --shadow-neon: 0 0 20px rgba(255, 68, 68, 0.6);
            
            /* Rounded corners */
            --border-radius: 16px;
            --border-radius-sm: 12px;
            --border-radius-lg: 24px;
            
            /* Smooth transitions */
            --transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            --transition-fast: all 0.2s ease;
            --transition-bounce: all 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            
            /* Eye-catching gradients */
            --gradient-primary: linear-gradient(135deg, #ff4444 0%, #ff6b6b 50%, #ffd93d 100%);
            --gradient-success: linear-gradient(135deg, #00d4aa 0%, #00ffcc 100%);
            --gradient-warning: linear-gradient(135deg, #ff6b35 0%, #ff9800 100%);
            --gradient-error: linear-gradient(135deg, #ff1744 0%, #ff4444 100%);
            --gradient-neon: linear-gradient(135deg, #ff4444 0%, #ffd93d 50%, #00d4aa 100%);
            --gradient-dark: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: var(--gradient-dark);
            background-attachment: fixed;
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(255, 68, 68, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 211, 61, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(0, 212, 170, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }

        #app {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .navbar {
            background: var(--gradient-dark);
            padding: 1.5rem 2rem;
            box-shadow: var(--shadow-neon);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(20px);
            border-bottom: 2px solid var(--border-neon);
            border-radius: 0 0 var(--border-radius-lg) var(--border-radius-lg);
            position: relative;
            overflow: hidden;
        }

        .navbar::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 68, 68, 0.2), transparent);
            animation: shimmer 3s infinite;
        }

        .nav-brand {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .nav-brand h1 {
            background: var(--gradient-neon);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 2rem;
            font-weight: 900;
            letter-spacing: -0.02em;
            text-shadow: 0 0 20px rgba(255, 68, 68, 0.5);
            animation: textGlow 2s ease-in-out infinite alternate;
        }

        .nav-brand::before {
            content: "üö®";
            font-size: 2rem;
            animation: alarmPulse 1s infinite;
            filter: drop-shadow(0 0 10px rgba(255, 68, 68, 0.8));
        }

        @keyframes textGlow {
            from { text-shadow: 0 0 20px rgba(255, 68, 68, 0.5); }
            to { text-shadow: 0 0 30px rgba(255, 68, 68, 0.8), 0 0 40px rgba(255, 211, 61, 0.3); }
        }

        @keyframes alarmPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .nav-actions {
            display: flex;
            gap: 0.5rem;
        }

        .btn-primary, .btn-secondary, .btn-icon {
            padding: 0.875rem 1.75rem;
            border: none;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            position: relative;
            overflow: hidden;
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: white;
            box-shadow: var(--shadow-neon);
            border: 2px solid var(--border-neon);
            position: relative;
            overflow: hidden;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        .btn-primary:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: var(--shadow-elevated);
            border-color: var(--accent-color);
        }

        .btn-primary:hover::before {
            left: 100%;
        }

        .btn-primary:active {
            transform: translateY(-1px) scale(1.02);
        }

        .btn-secondary {
            background: var(--surface-color);
            color: var(--text-primary);
            border: 2px solid var(--border-color);
            box-shadow: var(--shadow);
        }

        .btn-secondary:hover {
            background: var(--surface-variant);
            border-color: var(--primary-color);
            transform: translateY(-1px);
            box-shadow: var(--shadow-hover);
        }

        .btn-icon {
            padding: 0.5rem;
            background: transparent;
            color: var(--text-secondary);
            font-size: 1.2rem;
        }

        .btn-icon:hover {
            color: var(--primary-color);
            background: var(--background-color);
        }

        .main-content {
            flex: 1;
            padding: 1rem;
            max-width: 800px;
            margin: 0 auto;
            width: 100%;
        }

        .alarm-status {
            background: var(--surface-color);
            padding: 2rem;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
            text-align: center;
            border: 1px solid var(--border-light);
            position: relative;
            overflow: hidden;
        }

        .alarm-status::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-primary);
        }

        .status-indicator {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--gradient-success);
            margin: 0 auto 1rem;
            animation: pulse 2s infinite;
            box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.4);
        }

        .status-indicator.ringing {
            background: var(--gradient-error);
            animation: alarm-pulse 0.5s infinite;
            box-shadow: 0 0 0 0 rgba(244, 67, 54, 0.4);
        }

        @keyframes pulse {
            0%, 100% { 
                opacity: 1; 
                transform: scale(1);
            }
            50% { 
                opacity: 0.7; 
                transform: scale(1.05);
            }
        }

        @keyframes alarm-pulse {
            0%, 100% { 
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(244, 67, 54, 0.4);
            }
            50% { 
                transform: scale(1.2);
                box-shadow: 0 0 0 10px rgba(244, 67, 54, 0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes shimmer {
            0% {
                background-position: -200px 0;
            }
            100% {
                background-position: calc(200px + 100%) 0;
            }
        }

        .fade-in-up {
            animation: fadeInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .fade-in-scale {
            animation: fadeInScale 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .bounce-in {
            animation: bounceIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .shake {
            animation: shake 0.5s ease-in-out;
        }

        .modal {
            animation: fadeInScale 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .modal-overlay {
            animation: fadeInScale 0.2s ease-out;
        }

        /* Alarm active state */
        body.alarm-active {
            animation: alarm-glow 2s infinite;
        }

        body.alarm-active::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at center, rgba(244, 67, 54, 0.1) 0%, transparent 70%);
            pointer-events: none;
            z-index: -1;
            animation: pulse 2s infinite;
        }

        .status-text {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        /* Hero Section */
        .hero-section {
            background: var(--gradient-dark);
            padding: 3rem 2rem;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-neon);
            margin-bottom: 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
            border: 2px solid var(--border-neon);
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 30% 20%, rgba(255, 68, 68, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 70% 80%, rgba(255, 211, 61, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .hero-content {
            position: relative;
            z-index: 1;
        }

        .hero-title {
            font-size: 2.5rem;
            font-weight: 900;
            background: var(--gradient-neon);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
            text-shadow: 0 0 30px rgba(255, 68, 68, 0.5);
            animation: textGlow 2s ease-in-out infinite alternate;
        }

        .hero-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .hero-stats {
            display: flex;
            justify-content: center;
            gap: 3rem;
            margin-top: 2rem;
        }

        .stat-item {
            text-align: center;
            padding: 1rem;
            background: var(--surface-elevated);
            border-radius: var(--border-radius);
            border: 1px solid var(--border-neon);
            min-width: 120px;
            transition: var(--transition);
        }

        .stat-item:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-neon);
        }

        .stat-number {
            display: block;
            font-size: 2rem;
            font-weight: 900;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            display: block;
            font-size: 0.9rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 0.5rem;
        }

        /* Progress Section */
        .progress-section {
            background: var(--gradient-dark);
            padding: 2rem;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-neon);
            margin-bottom: 2rem;
            border: 2px solid var(--border-neon);
            position: relative;
            overflow: hidden;
        }

        .progress-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gradient-neon);
        }

        .progress-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .progress-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1.5rem;
            background: var(--surface-elevated);
            border-radius: var(--border-radius);
            border: 1px solid var(--border-neon);
            transition: var(--transition);
        }

        .progress-item:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-neon);
            border-color: var(--accent-color);
        }

        .progress-icon {
            font-size: 2rem;
            filter: drop-shadow(0 0 10px rgba(255, 68, 68, 0.5));
        }

        .progress-info {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .progress-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .progress-value {
            font-size: 1.5rem;
            font-weight: 700;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .achievement-badge {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1.5rem;
            background: var(--gradient-success);
            border-radius: var(--border-radius);
            border: 2px solid var(--success-color);
            text-align: center;
            justify-content: center;
            animation: bounceIn 1s ease-out;
        }

        .badge-icon {
            font-size: 2rem;
            filter: drop-shadow(0 0 10px rgba(0, 212, 170, 0.5));
        }

        .badge-text {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text-primary);
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
        }

        section {
            background: var(--surface-color);
            padding: 2rem;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
            border: 1px solid var(--border-light);
            position: relative;
            overflow: hidden;
        }

        section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gradient-primary);
        }

        section h2 {
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
            font-weight: 700;
            letter-spacing: -0.01em;
        }

        .alarms-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .alarm-item {
            background: var(--surface-color);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            border: 1px solid var(--border-light);
            border-left: 4px solid var(--primary-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: var(--transition);
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }

        .alarm-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--gradient-primary);
        }

        .alarm-item:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-hover);
            border-color: var(--primary-light);
        }

        .alarm-item.active {
            border-left-color: var(--error-color);
            background: linear-gradient(135deg, #ffebee 0%, #fce4ec 100%);
            animation: alarm-glow 2s infinite;
        }

        @keyframes alarm-glow {
            0%, 100% { box-shadow: var(--shadow); }
            50% { box-shadow: 0 4px 20px rgba(244, 67, 54, 0.3); }
        }

        .alarm-info {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .alarm-time {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .alarm-challenges {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .alarm-actions {
            display: flex;
            gap: 0.5rem;
        }

        .empty-state {
            text-align: center;
            padding: 2rem;
            color: var(--text-secondary);
        }

        .demo-section {
            background: var(--surface-color);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            margin-bottom: 1.5rem;
        }

        .demo-section h3 {
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .feature-card {
            background: var(--gradient-dark);
            padding: 2rem;
            border-radius: var(--border-radius-lg);
            border: 2px solid var(--border-neon);
            text-align: center;
            transition: var(--transition-bounce);
            box-shadow: var(--shadow-neon);
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gradient-primary);
            transform: scaleX(0);
            transition: var(--transition);
        }

        .feature-card:hover {
            transform: translateY(-8px) scale(1.05);
            box-shadow: var(--shadow-elevated);
            border-color: var(--accent-color);
            background: var(--gradient-neon);
        }

        .feature-card:hover::before {
            transform: scaleX(1);
            background: var(--gradient-primary);
        }

        .feature-card:hover h4 {
            color: var(--text-primary);
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        .feature-card h4 {
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.75rem;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .notifications {
            position: fixed;
            top: 1rem;
            right: 1rem;
            z-index: 1001;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .notification {
            background: var(--surface-color);
            padding: 1.25rem;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-elevated);
            border: 1px solid var(--border-light);
            border-left: 4px solid var(--primary-color);
            max-width: 350px;
            animation: slideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .notification::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--gradient-primary);
        }

        .notification.success {
            border-left-color: var(--success-color);
        }

        .notification.success::before {
            background: var(--gradient-success);
        }

        .notification.error {
            border-left-color: var(--error-color);
        }

        .notification.error::before {
            background: var(--gradient-error);
        }

        .notification.warning {
            border-left-color: var(--warning-color);
        }

        .notification.warning::before {
            background: var(--gradient-warning);
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }

        @keyframes bounceIn {
            0% {
                opacity: 0;
                transform: scale(0.3);
            }
            50% {
                opacity: 1;
                transform: scale(1.05);
            }
            70% {
                transform: scale(0.9);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        /* Modal styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            backdrop-filter: blur(4px);
        }

        .modal {
            background: var(--surface-color);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-elevated);
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            border: 1px solid var(--border-light);
        }

        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-light);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--gradient-primary);
            color: white;
            border-radius: var(--border-radius-lg) var(--border-radius-lg) 0 0;
        }

        .modal-header h3 {
            margin: 0;
            font-size: 1.25rem;
            font-weight: 600;
        }

        .btn-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: white;
            padding: 0.25rem;
            border-radius: var(--border-radius-sm);
            transition: var(--transition);
        }

        .btn-close:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .modal-body {
            padding: 1.5rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius-sm);
            font-size: 1rem;
            transition: var(--transition);
            background: var(--surface-color);
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(25, 118, 210, 0.1);
        }

        .challenge-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 0.75rem;
            margin-top: 0.5rem;
        }

        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            transition: var(--transition);
            background: var(--surface-color);
        }

        .checkbox-label:hover {
            border-color: var(--primary-color);
            background: var(--surface-variant);
        }

        .checkbox-label input[type="checkbox"] {
            width: auto;
            margin: 0;
        }

        .form-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border-light);
        }

        /* Leaderboard styles */
        .leaderboard {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .leaderboard-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: var(--surface-elevated);
            border-radius: var(--border-radius);
            border: 1px solid var(--border-neon);
            transition: var(--transition);
        }

        .leaderboard-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-neon);
        }

        .leaderboard-item.rank-1 {
            background: var(--gradient-warning);
            border-color: var(--warning-color);
        }

        .leaderboard-item.rank-2 {
            background: var(--gradient-success);
            border-color: var(--success-color);
        }

        .leaderboard-item.rank-3 {
            background: var(--gradient-primary);
            border-color: var(--primary-color);
        }

        .leaderboard-item.your-rank {
            background: var(--gradient-neon);
            border-color: var(--accent-color);
            animation: bounceIn 1s ease-out;
        }

        .leaderboard .rank {
            font-size: 1.5rem;
            min-width: 2rem;
        }

        .leaderboard .name {
            flex: 1;
            font-weight: 600;
            color: var(--text-primary);
        }

        .leaderboard .score {
            font-weight: 700;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .leaderboard-actions {
            text-align: center;
            padding-top: 1rem;
            border-top: 1px solid var(--border-light);
        }

        /* Subscription plans */
        .subscription-plans {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .plan-card {
            background: var(--gradient-dark);
            padding: 2rem;
            border-radius: var(--border-radius-lg);
            border: 2px solid var(--border-neon);
            text-align: center;
            transition: var(--transition-bounce);
            position: relative;
            overflow: hidden;
        }

        .plan-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: var(--shadow-elevated);
        }

        .plan-card.pro {
            border-color: var(--primary-color);
            box-shadow: var(--shadow-neon);
        }

        .plan-card.premium {
            border-color: var(--accent-color);
            box-shadow: var(--shadow-elevated);
            background: var(--gradient-neon);
        }

        .plan-card h4 {
            font-size: 1.5rem;
            font-weight: 900;
            margin-bottom: 1rem;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .plan-price {
            font-size: 2rem;
            font-weight: 900;
            color: var(--text-accent);
            margin-bottom: 1.5rem;
        }

        .plan-features {
            list-style: none;
            margin-bottom: 2rem;
        }

        .plan-features li {
            padding: 0.5rem 0;
            color: var(--text-secondary);
            border-bottom: 1px solid var(--border-light);
        }

        .plan-features li:last-child {
            border-bottom: none;
        }

        @media (max-width: 768px) {
            .main-content {
                padding: 0.5rem;
            }
            
            .navbar {
                padding: 0.75rem;
            }
            
            .nav-brand h1 {
                font-size: 1.2rem;
            }
            
            section {
                padding: 1rem;
            }
            
            .alarm-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
            
            .alarm-actions {
                width: 100%;
                justify-content: flex-end;
            }

            .modal {
                width: 95%;
                margin: 1rem;
            }

            .challenge-options {
                grid-template-columns: 1fr;
            }

            .form-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- Navigation -->
        <nav class="navbar">
            <div class="nav-brand">
                <h1>üö® WakeUpProof</h1>
            </div>
            <div class="nav-actions">
                <button id="share-btn" class="btn-icon" title="Condividi la tua vittoria">üì§</button>
                <button id="leaderboard-btn" class="btn-icon" title="Classifica">üèÜ</button>
                <button id="settings-btn" class="btn-icon" title="Impostazioni">‚öôÔ∏è</button>
                <button id="subscription-btn" class="btn-icon" title="Abbonamenti">üí≥</button>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Alarm Status -->
            <div id="alarm-status" class="alarm-status">
                <div class="status-indicator" id="status-indicator"></div>
                <div class="status-text" id="status-text">Sistema pronto</div>
            </div>

            <!-- Hero Section -->
            <div class="hero-section">
                <div class="hero-content">
                    <h2 class="hero-title">üö® LA SVEGLIA CHE NON PUOI SPEGNERE!</h2>
                    <p class="hero-subtitle">Challenge reali, zero scuse, 100% efficacia. Trasforma la tua mattina in una vittoria!</p>
                    <div class="hero-stats">
                        <div class="stat-item">
                            <span class="stat-number">99.9%</span>
                            <span class="stat-label">Efficacia</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">0</span>
                            <span class="stat-label">Scuse</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">‚àû</span>
                            <span class="stat-label">Motivazione</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Demo Section -->
            <div class="demo-section">
                <h3>üéØ Testa le Funzionalit√†</h3>
                <p>Prova le funzionalit√† che renderanno impossibile dormire troppo a lungo!</p>
                
                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>üì∏ Camera</h4>
                        <p>Challenge foto con template matching</p>
                        <button class="btn-primary" onclick="testCamera()">Test Camera</button>
                    </div>
                    
                    <div class="feature-card">
                        <h4>üö∂ Sensori</h4>
                        <p>Contapassi con accelerometro</p>
                        <button class="btn-primary" onclick="testSensors()">Test Sensori</button>
                    </div>
                    
                    <div class="feature-card">
                        <h4>üì° NFC/QR</h4>
                        <p>Scanner NFC e QR code</p>
                        <button class="btn-primary" onclick="testNFCQR()">Test NFC/QR</button>
                    </div>
                    
                    <div class="feature-card">
                        <h4>üí≥ Abbonamenti</h4>
                        <p>Sistema Free/Pro/Premium</p>
                        <button class="btn-primary" onclick="testSubscriptions()">Test Abbonamenti</button>
                    </div>
                </div>
            </div>

            <!-- Progress Section -->
            <section class="progress-section">
                <h2>üèÜ I Tuoi Progressi</h2>
                <div class="progress-stats">
                    <div class="progress-item">
                        <div class="progress-icon">üî•</div>
                        <div class="progress-info">
                            <span class="progress-label">Streak Giornaliero</span>
                            <span class="progress-value">7 giorni</span>
                        </div>
                    </div>
                    <div class="progress-item">
                        <div class="progress-icon">‚ö°</div>
                        <div class="progress-info">
                            <span class="progress-label">Challenge Completati</span>
                            <span class="progress-value">23/30</span>
                        </div>
                    </div>
                    <div class="progress-item">
                        <div class="progress-icon">üéØ</div>
                        <div class="progress-info">
                            <span class="progress-label">Efficacia</span>
                            <span class="progress-value">94%</span>
                        </div>
                    </div>
                </div>
                <div class="achievement-badge">
                    <span class="badge-icon">üèÖ</span>
                    <span class="badge-text">Early Bird Master</span>
                </div>
            </section>

            <!-- Active Alarms -->
            <section class="alarms-section">
                <h2>üö® Allarmi Attivi</h2>
                <div id="alarms-list" class="alarms-list">
                    <div class="empty-state">
                        <p>Nessun allarme configurato</p>
                        <p>Clicca "Nuovo Allarme" per iniziare la tua trasformazione!</p>
                    </div>
                </div>
                <button id="add-alarm-btn" class="btn-primary">+ Crea Allarme Impossibile</button>
            </section>

            <!-- Challenge Status -->
            <section class="challenges-section" id="challenges-section" style="display: none;">
                <h2>Challenge Attivi</h2>
                <div id="challenges-list" class="challenges-list">
                    <!-- Challenges will be populated here -->
                </div>
            </section>
        </main>

        <!-- Notifications -->
        <div id="notifications" class="notifications"></div>
    </div>

    <!-- Include real modules -->
    <script src="js/database.js"></script>
    <script src="js/alarm-engine.js"></script>
    <script src="js/challenge-engine.js"></script>
    <script src="js/camera-handler.js"></script>
    <script src="js/sensors-handler.js"></script>
    <script src="js/subscription-service.js"></script>
    <script src="js/ui-manager.js"></script>

    <script>
        // Real WakeUpProof functionality
        let alarmCount = 0;
        let challengeCount = 0;
        let isInitialized = false;

        // Initialize app with real modules
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('WakeUpProof Standalone loaded');
            await initializeApp();
            setupEventListeners();
            showWelcomeMessage();
        });

        async function initializeApp() {
            try {
                // Initialize database
                if (typeof database !== 'undefined') {
                    await database.init();
                    console.log('Database initialized');
                }

                // Initialize services
                if (typeof alarmEngine !== 'undefined') {
                    await alarmEngine.init();
                    console.log('Alarm Engine initialized');
                }

                if (typeof challengeEngine !== 'undefined') {
                    await challengeEngine.init();
                    console.log('Challenge Engine initialized');
                }

                if (typeof subscriptionService !== 'undefined') {
                    await subscriptionService.init();
                    console.log('Subscription Service initialized');
                }

                // Load existing alarms
                await loadAlarms();
                
                isInitialized = true;
                console.log('WakeUpProof fully initialized');
            } catch (error) {
                console.error('Error initializing app:', error);
                showNotification('Errore inizializzazione app', 'error');
            }
        }

        function setupEventListeners() {
            // Add alarm button
            document.getElementById('add-alarm-btn').addEventListener('click', showAddAlarmModal);
            
            // Navigation buttons
            document.getElementById('share-btn').addEventListener('click', shareVictory);
            document.getElementById('leaderboard-btn').addEventListener('click', showLeaderboard);
            document.getElementById('settings-btn').addEventListener('click', showSettings);
            document.getElementById('subscription-btn').addEventListener('click', showSubscriptions);
        }

        function showWelcomeMessage() {
            showNotification('üö® Benvenuto nel futuro del risveglio! Zero scuse, 100% risultati!', 'success');
            
            // Show achievement popup
            setTimeout(() => {
                showNotification('üèÜ Achievement sbloccato: "Primo Passo verso la Vittoria"', 'warning');
            }, 2000);
        }

        async function loadAlarms() {
            try {
                if (typeof database !== 'undefined') {
                    const alarms = await database.getAlarms();
                    displayAlarms(alarms);
                } else {
                    // Fallback to demo mode
                    displayAlarms([]);
                }
            } catch (error) {
                console.error('Error loading alarms:', error);
                showNotification('Errore caricamento allarmi', 'error');
            }
        }

        function displayAlarms(alarms) {
            const alarmsList = document.getElementById('alarms-list');
            if (!alarmsList) return;

            alarmsList.innerHTML = '';

            if (alarms.length === 0) {
                alarmsList.innerHTML = `
                    <div class="empty-state">
                        <p>Nessun allarme configurato</p>
                        <p>Clicca "Nuovo Allarme" per iniziare</p>
                    </div>
                `;
                return;
            }

            alarms.forEach(alarm => {
                addAlarmToList(alarm);
            });
        }

        async function showAddAlarmModal() {
            // Create modal for adding alarm
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.innerHTML = `
                <div class="modal">
                    <div class="modal-header">
                        <h3>Nuovo Allarme</h3>
                        <button class="btn-close" onclick="this.closest('.modal-overlay').remove()">√ó</button>
                    </div>
                    <div class="modal-body">
                        <form id="add-alarm-form">
                            <div class="form-group">
                                <label for="alarm-time">Orario</label>
                                <input type="time" id="alarm-time" required>
                            </div>
                            <div class="form-group">
                                <label for="alarm-recurrence">Ripetizione</label>
                                <select id="alarm-recurrence" required>
                                    <option value="daily">Giornaliero</option>
                                    <option value="weekdays">Lun-Ven</option>
                                    <option value="weekends">Sab-Dom</option>
                                    <option value="once">Una volta</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Challenge</label>
                                <div class="challenge-options">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="challenge-photo" value="photo">
                                        üì∏ Foto bagno
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="challenge-steps" value="steps">
                                        üö∂ Passi (120 in 2min)
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="challenge-nfc" value="nfc">
                                        üì° NFC (Pro)
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="challenge-qr" value="qr">
                                        üì± QR Code (Pro)
                                    </label>
                                </div>
                            </div>
                            <div class="form-actions">
                                <button type="button" class="btn-secondary" onclick="this.closest('.modal-overlay').remove()">
                                    Annulla
                                </button>
                                <button type="submit" class="btn-primary">
                                    Crea Allarme
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);

            // Handle form submission
            modal.querySelector('#add-alarm-form').addEventListener('submit', async (e) => {
                e.preventDefault();
                await createAlarm(modal);
            });
        }

        async function createAlarm(modal) {
            try {
                const formData = new FormData(modal.querySelector('#add-alarm-form'));
                const alarmData = {
                    time: formData.get('alarm-time') || modal.querySelector('#alarm-time').value,
                    recurrence: formData.get('alarm-recurrence') || modal.querySelector('#alarm-recurrence').value,
                    challenges: []
                };

                // Collect selected challenges
                const challengeCheckboxes = modal.querySelectorAll('input[type="checkbox"]:checked');
                challengeCheckboxes.forEach(checkbox => {
                    alarmData.challenges.push(checkbox.value);
                });

                // Create alarm using real alarm engine
                if (typeof alarmEngine !== 'undefined') {
                    const alarm = await alarmEngine.createAlarm(alarmData);
                    
                    // Create challenges
                    if (alarmData.challenges.length > 0) {
                        for (const challengeType of alarmData.challenges) {
                            await challengeEngine.createChallenge(alarm.id, challengeType);
                        }
                    }

                    // Reload alarms
                    await loadAlarms();
                    
                    showNotification('Allarme creato con successo! ‚è∞', 'success');
                    modal.remove();
                } else {
                    // Fallback to demo mode
                    alarmCount++;
                    const alarm = {
                        id: 'alarm-' + alarmCount,
                        time: alarmData.time,
                        recurrence: alarmData.recurrence,
                        challenges: alarmData.challenges,
                        enabled: true
                    };
                    
                    addAlarmToList(alarm);
                    showNotification('Allarme demo creato! ‚è∞', 'success');
                    modal.remove();
                }
            } catch (error) {
                console.error('Error creating alarm:', error);
                showNotification('Errore creazione allarme', 'error');
            }
        }

        function addAlarmToList(alarm) {
            const alarmsList = document.getElementById('alarms-list');
            const emptyState = alarmsList.querySelector('.empty-state');
            
            if (emptyState) {
                emptyState.remove();
            }
            
            const alarmElement = document.createElement('div');
            alarmElement.className = 'alarm-item fade-in-up';
            alarmElement.innerHTML = `
                <div class="alarm-info">
                    <div class="alarm-time">${alarm.time}</div>
                    <div class="alarm-challenges">${alarm.challenges ? alarm.challenges.length : 0} challenge ‚Ä¢ ${alarm.recurrence || 'Giornaliero'}</div>
                </div>
                <div class="alarm-actions">
                    <button class="btn-secondary" onclick="editAlarm('${alarm.id}')">‚úèÔ∏è</button>
                    <button class="btn-secondary" onclick="deleteAlarm('${alarm.id}')">üóëÔ∏è</button>
                </div>
            `;
            
            alarmsList.appendChild(alarmElement);
            
            // Add staggered animation for multiple items
            const items = alarmsList.querySelectorAll('.alarm-item');
            items.forEach((item, index) => {
                item.style.animationDelay = `${index * 0.1}s`;
            });
        }

        function editAlarm(alarmId) {
            showNotification('Funzionalit√† di modifica in sviluppo', 'warning');
        }

        function deleteAlarm(alarmId) {
            const alarmElement = document.querySelector(`[onclick="deleteAlarm('${alarmId}')"]`).closest('.alarm-item');
            alarmElement.remove();
            showNotification('Allarme eliminato', 'success');
        }

        function showSettings() {
            showNotification('Impostazioni in sviluppo', 'warning');
        }

        function shareVictory() {
            const shareText = "üö® Ho appena sconfitto la pigrizia con WakeUpProof! La sveglia che NON puoi spegnere! üí™ #WakeUpProof #NoMoreSnooze";
            
            if (navigator.share) {
                navigator.share({
                    title: 'WakeUpProof - La Sveglia Impossibile',
                    text: shareText,
                    url: window.location.href
                });
            } else {
                // Fallback: copy to clipboard
                navigator.clipboard.writeText(shareText).then(() => {
                    showNotification('üì§ Testo copiato! Condividi la tua vittoria sui social!', 'success');
                });
            }
        }

        function showLeaderboard() {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.innerHTML = `
                <div class="modal">
                    <div class="modal-header">
                        <h3>üèÜ Classifica Globale</h3>
                        <button class="btn-close" onclick="this.closest('.modal-overlay').remove()">√ó</button>
                    </div>
                    <div class="modal-body">
                        <div class="leaderboard">
                            <div class="leaderboard-item rank-1">
                                <span class="rank">ü•á</span>
                                <span class="name">SleepDestroyer99</span>
                                <span class="score">847 punti</span>
                            </div>
                            <div class="leaderboard-item rank-2">
                                <span class="rank">ü•à</span>
                                <span class="name">EarlyBirdMaster</span>
                                <span class="score">723 punti</span>
                            </div>
                            <div class="leaderboard-item rank-3">
                                <span class="rank">ü•â</span>
                                <span class="name">NoSnoozeHero</span>
                                <span class="score">691 punti</span>
                            </div>
                            <div class="leaderboard-item your-rank">
                                <span class="rank">üë§</span>
                                <span class="name">Tu</span>
                                <span class="score">234 punti</span>
                            </div>
                        </div>
                        <div class="leaderboard-actions">
                            <button class="btn-primary" onclick="shareVictory()">Condividi il tuo progresso</button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function showSubscriptions() {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.innerHTML = `
                <div class="modal">
                    <div class="modal-header">
                        <h3>üí≥ Scegli il Tuo Piano</h3>
                        <button class="btn-close" onclick="this.closest('.modal-overlay').remove()">√ó</button>
                    </div>
                    <div class="modal-body">
                        <div class="subscription-plans">
                            <div class="plan-card free">
                                <h4>üÜì FREE</h4>
                                <div class="plan-price">‚Ç¨0/mese</div>
                                <ul class="plan-features">
                                    <li>1 allarme</li>
                                    <li>2 challenge</li>
                                    <li>Statistiche base</li>
                                </ul>
                                <button class="btn-secondary">Piano Attuale</button>
                            </div>
                            <div class="plan-card pro">
                                <h4>‚ö° PRO</h4>
                                <div class="plan-price">‚Ç¨4.99/mese</div>
                                <ul class="plan-features">
                                    <li>5 allarmi</li>
                                    <li>100 challenge</li>
                                    <li>NFC & QR</li>
                                    <li>Analytics avanzate</li>
                                </ul>
                                <button class="btn-primary">Upgrade</button>
                            </div>
                            <div class="plan-card premium">
                                <h4>üëë PREMIUM</h4>
                                <div class="plan-price">‚Ç¨9.99/mese</div>
                                <ul class="plan-features">
                                    <li>Allarmi illimitati</li>
                                    <li>Challenge personalizzati</li>
                                    <li>Coaching AI</li>
                                    <li>Supporto prioritario</li>
                                </ul>
                                <button class="btn-primary">Upgrade</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // Test functions with real modules
        async function testCamera() {
            try {
                if (typeof cameraHandler !== 'undefined') {
                    const success = await cameraHandler.startCamera();
                    if (success) {
                        showNotification('Camera funzionante! üì∏', 'success');
                        await cameraHandler.stopCamera();
                    } else {
                        showNotification('Errore avvio camera', 'error');
                    }
                } else {
                    // Fallback to basic test
                    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                        const stream = await navigator.mediaDevices.getUserMedia({ video: true });
                        stream.getTracks().forEach(track => track.stop());
                        showNotification('Camera funzionante! üì∏', 'success');
                    } else {
                        showNotification('Camera non supportata', 'error');
                    }
                }
            } catch (error) {
                showNotification('Errore camera: ' + error.message, 'error');
            }
        }

        async function testSensors() {
            try {
                if (typeof sensorsHandler !== 'undefined') {
                    const info = await sensorsHandler.getDeviceInfo();
                    showNotification('Sensori supportati! üö∂', 'success');
                    console.log('Device info:', info);
                } else {
                    if ('DeviceMotionEvent' in window) {
                        showNotification('Sensori supportati! üö∂', 'success');
                    } else {
                        showNotification('Sensori non supportati', 'warning');
                    }
                }
            } catch (error) {
                showNotification('Errore test sensori: ' + error.message, 'error');
            }
        }

        async function testNFCQR() {
            try {
                if (typeof challengeEngine !== 'undefined') {
                    // Test NFC/QR challenge creation
                    const challenge = await challengeEngine.createChallenge('test-alarm', 'qr', {
                        expectedData: 'test-qr-data'
                    });
                    showNotification('NFC/QR: Challenge creato correttamente', 'success');
                } else {
                    showNotification('NFC/QR: Funzionalit√† mock per demo', 'warning');
                }
            } catch (error) {
                showNotification('Errore test NFC/QR: ' + error.message, 'error');
            }
        }

        async function testSubscriptions() {
            try {
                if (typeof subscriptionService !== 'undefined') {
                    const plan = subscriptionService.getCurrentPlan();
                    const features = subscriptionService.getCurrentFeatures();
                    showNotification(`Abbonamenti: Piano ${plan.toUpperCase()} attivo`, 'success');
                    console.log('Subscription features:', features);
                } else {
                    showNotification('Abbonamenti: Free/Pro/Premium disponibili', 'success');
                }
            } catch (error) {
                showNotification('Errore test abbonamenti: ' + error.message, 'error');
            }
        }

        // Notification system with animations
        function showNotification(message, type = 'info') {
            const notifications = document.getElementById('notifications');
            const notification = document.createElement('div');
            notification.className = `notification ${type} fade-in-scale`;
            notification.textContent = message;
            
            notifications.appendChild(notification);
            
            // Add exit animation before removing
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.style.animation = 'slideOut 0.3s ease forwards';
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.parentNode.removeChild(notification);
                        }
                    }, 300);
                }
            }, 5000);
        }

        // Simulate alarm trigger with animations
        function simulateAlarm() {
            const statusIndicator = document.getElementById('status-indicator');
            const statusText = document.getElementById('status-text');
            
            // Add shake animation to status indicator
            statusIndicator.className = 'status-indicator ringing shake';
            statusText.textContent = 'ALARME ATTIVO - Completa i challenge!';
            
            // Add bounce animation to status text
            statusText.classList.add('bounce-in');
            
            showNotification('Allarme attivato! üö®', 'warning');
            
            // Show challenges section with animation
            const challengesSection = document.getElementById('challenges-section');
            challengesSection.style.display = 'block';
            challengesSection.classList.add('fade-in-up');
            
            // Add demo challenges
            addDemoChallenges();
            
            // Add alarm glow effect to the entire app
            document.body.classList.add('alarm-active');
        }

        function addDemoChallenges() {
            const challengesList = document.getElementById('challenges-list');
            challengesList.innerHTML = '';
            
            const challenges = [
                { id: 'challenge-1', type: 'photo', title: 'üì∏ Challenge Foto', description: 'Scatta una foto del lavabo' },
                { id: 'challenge-2', type: 'steps', title: 'üö∂ Challenge Passi', description: 'Fai 120 passi in 2 minuti' }
            ];
            
            challenges.forEach(challenge => {
                const challengeElement = document.createElement('div');
                challengeElement.className = 'alarm-item';
                challengeElement.innerHTML = `
                    <div class="alarm-info">
                        <div class="alarm-time">${challenge.title}</div>
                        <div class="alarm-challenges">${challenge.description}</div>
                    </div>
                    <div class="alarm-actions">
                        <button class="btn-primary" onclick="completeChallenge('${challenge.id}')">Completa</button>
                    </div>
                `;
                challengesList.appendChild(challengeElement);
            });
        }

        function completeChallenge(challengeId) {
            showNotification('Challenge completato! ‚úÖ', 'success');
            
            // Add success animation to completed challenge
            const challengeElement = document.querySelector(`[onclick="completeChallenge('${challengeId}')"]`);
            if (challengeElement) {
                challengeElement.closest('.alarm-item').classList.add('bounce-in');
                challengeElement.closest('.alarm-item').style.background = 'linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%)';
            }
            
            // Check if all challenges completed
            const remainingChallenges = document.querySelectorAll('.alarm-item');
            if (remainingChallenges.length <= 1) { // Only one challenge left
                // Stop alarm with animation
                setTimeout(() => {
                    const statusIndicator = document.getElementById('status-indicator');
                    const statusText = document.getElementById('status-text');
                    
                    statusIndicator.className = 'status-indicator fade-in-scale';
                    statusText.textContent = 'Sistema pronto';
                    statusText.classList.add('bounce-in');
                    
                    const challengesSection = document.getElementById('challenges-section');
                    challengesSection.style.display = 'none';
                    
                    // Remove alarm active state
                    document.body.classList.remove('alarm-active');
                    
                    showNotification('Allarme spento! üéâ', 'success');
                }, 1000);
            }
        }

        // Add demo alarm trigger button
        document.addEventListener('DOMContentLoaded', function() {
            const addAlarmBtn = document.getElementById('add-alarm-btn');
            const demoBtn = document.createElement('button');
            demoBtn.className = 'btn-secondary';
            demoBtn.textContent = 'üö® Simula Allarme';
            demoBtn.onclick = simulateAlarm;
            addAlarmBtn.parentNode.insertBefore(demoBtn, addAlarmBtn.nextSibling);
        });
    </script>
</body>
</html>
